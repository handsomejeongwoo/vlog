# 코드 리뷰중 생긴일

새로고침을 막기위해 beforeUnload 이벤트를 이용하여 코를 작성후 pr을 열었다.  
하지만 팀원이 이러한 리뷰를 달았다.

사진

"어 저렇게 해도 될거같은데?" 라는 의문이 들었다. 하지만 실제로는 작동되지 않았고 그떄 나도 내가짠코드가 즉시실행 함수인걸 알았다.

# 즉시 실행 함수

그렇다면 즉시 실행 함수란 무엇일까?

함수 정의와 동시에 실행되는 함수를 즉시 실행 함수라고 한다.
즉시 실행 함수는 단 한번만 호출되며 다시 호출할수 없다.

# 왜 안되는 것일까?

구글링을 해보니 즉시 실행 함수는 그룹 연산자(...)로 감싸야 한다고 한다.
그렇지 않으면 에러가 발생한다고 한다...

# 결론

내가 생각한 결론은 위의 코드는 한마디로 함수를 선언한것이였다. 그러므로 실행이 되지 않았던것이다.

아래코드는 그룹연산자로 한번더 덮었기에 익명의 함수가 선언되서 실행이 된것이였다.

```js
(() => {
  window.addEventListener("beforeunload", preventClose); //익명의 함수를 선언하고 그룹연산자로 한번더 감쌈으로서 즉시 실행이된다.
})();

() => window.addEventListener("beforeunload", preventClose); // 익명의 함수만 선언된것이다.
```

# 즉시 실행 함수는 왜 사용되는가?

## 1.필요 없는 전역 변수 생성을 줄일 수 있다.

함수를 생성하면 그 함수는 전역 변수로써 남아있게 되고, 많은 변수의 생성은 전역 스코프를 오염 시킬 수 있다.

하지만 즉시실행함수를 선언하면 내부 변수가 전여긍로 저장되지 않기 땜누에 전역 스코프의 오염을 줄일 수 있다.

## 2.private한 변수를 만들 수 있다.

즉시실행함수는 외부에서 접근할 수 없는 자체적인 스코프를 가지게 된다. 이는 클로저의 사용 목적과도 비슷하여 내부 변수를 외부로부터 private하게 보호 할수 있다.
